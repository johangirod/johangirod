<!doctype html>
<html lang="fr">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../../../favicon.png" />

		<meta name="viewport" content="width=device-width" />
		
		<link href="../../../_app/immutable/assets/0.DeOizrWX.css" rel="stylesheet">
		<link href="../../../_app/immutable/assets/2.Dz1qT87F.css" rel="stylesheet">
		<link href="../../../_app/immutable/assets/Reveal.BYkb6MAx.css" rel="stylesheet">
		<link rel="modulepreload" href="../../../_app/immutable/entry/start.Bnp5303b.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/Cugo8Sw9.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/_Roc1N7j.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/Du4uIILg.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/DYGiXs1v.js">
		<link rel="modulepreload" href="../../../_app/immutable/entry/app.gFT0rYy9.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/jKjWACjA.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/CozvbqRy.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/CU3E0FLs.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/B4pklceG.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/pFiT_qqh.js">
		<link rel="modulepreload" href="../../../_app/immutable/nodes/0.BjDQT2Bq.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/CMei0t4b.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/Bgovi1YL.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/D4AmcDfz.js">
		<link rel="modulepreload" href="../../../_app/immutable/nodes/2.CBLjlu0K.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/B0BGekoV.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/BMkXc6el.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/Cv3pZryr.js">
		<link rel="modulepreload" href="../../../_app/immutable/nodes/3.B95jCVCL.js">
		<link rel="modulepreload" href="../../../_app/immutable/nodes/8.2xShK07L.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/Cs1o_ong.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/OjqImkSQ.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/Dayddfh2.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/DyuDGlf2.js"><!--[--><!--]--><!--[--><!--]--><title>Johan Girod</title>
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents"><!--[--><!--[--><!----><div class="screen:container prose-h2 container prose prose-slate mx-auto my-12 px-4 lg:prose-xl prose-headings:text-slate-800 prose-h1:font-semibold prose-a:transition prose-a:duration-75 hover:prose-a:text-pink-500 lg:px-0 print:mx-0 print:max-w-none"><!----><!--[--><!----><div class="lg:prose-lg"><div style="view-transition-name: breadcrumb"><div class="mb-2 inline" role="list"><!--[--><li class="inline-block"><a href="/" class="text-pink-600" aria-label="Accueil">Accueil</a> <!--[--><span class="mx-2 text-gray-500">/</span><!--]--></li><li class="inline-block"><a href="/cours/" class="text-pink-600" aria-label="Cours et TP">Cours et TP</a> <!--[--><span class="mx-2 text-gray-500">/</span><!--]--></li><li class="inline-block"><a href="http://sveltekit-prerender/cours/tw2/2-manipulation-du-DOM/" class="text-pink-600" aria-label="...">...</a> <!--[!--><!--]--></li><!--]--></div><!----> <!--[--><span class="ml-2 inline-block rounded-full bg-pink-500 px-2 py-1 text-sm font-semibold text-white">Avec corrigé</span><!--]--></div> <main class="mt-8 prose-h1:inline-block prose-h1:border-y-8 prose-h1:border-pink-500 prose-h1:px-2 prose-h1:pb-3 prose-h1:pt-2 prose-h1:text-4xl prose-h2:text-3xl"><!----><!--[--><!----><!----><!--[!--><!----><div class="prose-code:radius-none prose-code:font-mono prose-code:font- mt-14 prose-h1:text-5xl prose-h2:text-3xl prose-h2:text-pink-500 prose-p:text-2xl prose-blockquote:text-2xl prose-blockquote:font-normal prose-blockquote:text-pink-500 prose-code:w-auto prose-code:rounded prose-pre:bg-slate-100 prose-pre:text-left prose-pre:text-xl prose-li:text-left prose-li:text-2xl md:-ml-14 md:-mr-14"><div class="reveal rounded-md border border-gray-200 shadow-lg svelte-1xe5mne"><!--[--><div class="absolute z-50 flex h-full w-full items-center justify-center bg-white"><div class="absolute z-50 flex h-full w-full items-center justify-center bg-white"><div class="h-32 w-32 animate-spin"><svg class="h-full w-full text-pink-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0
                                3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div></div></div><!--]--> <div class="slides"><!----><section><h1>Manipulation du DOM</h1> <h2 class="text-pink-500">Technologie web 2</h2> <p class="text-gray-500">Johan Girod</p></section> <section><section data-auto-animate="true"><h1>Rappel sur les éléments HTML</h1></section> <section><h2>Squelette d'un document HTML</h2> <ul><li>Un document HTML est composé d'éléments imbriqués les uns dans les autres</li> <li>Ces éléments sont délimités par des balises ouvrantes et fermantes.</li> <li>Les éléments racines sont <code>&lt;html></code>, <code>&lt;head></code> et <code>&lt;body></code></li></ul> <h3>Exemple de document</h3> <pre><code class="language-html" data-trim="">
<script type="text/template">
					<html>
						<head>
							<title>Titre de la page</title>
						</head>
						<body>
							<h1>Mon titre</h1>
							<p>
								Un paragraphe
								<img src="image.jpg" alt="Une image" />
							</p>
						</body>
					</html>;
				</script>
	</code></pre></section> <section><h2>Que trouve-t-on dans la balise <code>&lt;head></code> ?</h2> <div class="fragment lead text-2xl"><strong>Des métadonnées</strong> (tout ce qui n'est pas visible sur la page)</div> <ul class="fragment"><li>Le titre de la page <code>&lt;title></code></li> <li>Les feuilles de style <code>&lt;link rel="stylesheet" href="style.css"></code></li> <li>La description <code>&lt;meta name="description" content="..."></code></li> <li>L'encodage du document <code>&lt;meta charset="utf-8"></code></li> <li>Et bien d'autres (favicon, scripts, données pour les réseaux sociaux, etc.)</li></ul></section> <section><style>
			.fragment.grow-width {
				display: inline-flex;
				width: 0;
				opacity: 0;
				overflow: hidden;
				max-width: 0;
				transition: all 0.5s;
				white-space: nowrap;
			}
			.fragment.grow-width.visible {
				width: auto;
				width: calc-size(auto);
				opacity: 1;
				max-width: 400px;
			}
		</style> <h2>Anatomie d'une balise</h2> <div class="flex flex-col items-center gap-8"><div class="font-mono text-3xl"><span class="fragment custom grow-width" data-fragment-index="1">&lt;<span class="font-bold text-blue-500">a</span> <span class="fragment custom grow-width" data-fragment-index="3"><span class="ml-2"><span class="italic text-purple-500">class</span>=<span class="text-green-500">"ma-class"</span></span> <span class="ml-2"><span class="italic text-purple-500">href</span>=<span class="text-green-500">"/"</span></span></span> ></span> <span class="fragment custom grow-width mx-2" data-fragment-index="2">Revenir à l'accueil</span> <span class="fragment custom grow-width" data-fragment-index="1">&lt;/<span class="font-bold text-blue-500">a</span>></span></div> <div class="text-2xl italic text-gray-600"><span class="fragment custom grow-width" data-fragment-index="1">Nom de l'élément</span> <span class="fragment custom grow-width" data-fragment-index="3">⋅ Attributs</span> <span class="fragment custom grow-width" data-fragment-index="2">⋅ Contenu</span></div></div></section></section> <section><section data-auto-animate="true"><h1>Qu'est-ce que le DOM ?</h1></section> <section data-auto-animate="true"><h1>Qu'est-ce que le DOM ?</h1> <p class="lead" style="font-size: 1.8rem; line-height: 1.5">Le DOM (Document Object Model) est une <strong>interface de programmation pour manipuler des documents HTML</strong> en Javascript</p> <br> <ul class="small text-gray-600"><li class="fragment">Le document HTML est représenté sous <strong>forme d'arbre</strong></li> <li class="fragment"><strong>Tous les navigateurs</strong> implémentent le DOM</li> <li class="fragment">Les scripts JavaScript l'utilisent pour <strong>lire et modifier</strong> le document HTLM</li></ul></section> <section data-auto-animate=""><h2>Le document est représenté sous forme d'arbre</h2> <pre><code class="language-html" data-trim="">
<script type="text/template">
					<html>
						<head>
							<title>My title</title>
						</head>
						<body>
							<h1>A heading</h1>
							<a href="/">Link text</a>
						</body>
					</html>;
				</script>
</code></pre></section> <section data-auto-animate=""><h2>Le document est représenté sous forme d'arbre</h2> <img src="/_app/immutable/assets/dom.BrvoYPlw.png" alt="DOM tree" class="r-stretch"></section> <section><h2>Le DOM est implémentée par les navigateurs</h2> <div class="r-stretch"><img src="/_app/immutable/assets/rendering_pipeline.CdKLygpi.png" alt="Rendering pipeline : parsing, render tree, layout, paint" class="fragment"></div> <p class="fragment text-4xl"><strong>C'est l'étape de parsing</strong> (ou analyse syntaxique)</p> <div class="fragment"><h3>Ressources</h3> <ul><li><a href="https://developer.chrome.com/blog/inside-browser-part3">Comment fonctionne le rendu sur chrome ? (en anglais)</a></li> <li><a href="https://developer.mozilla.org/fr/docs/Web/Performance/How_browsers_work">Comment fonctionne un navigateur ?</a></li></ul></div></section> <section><h2>Accéder au DOM en JavaScript</h2> <p>Le DOM est accessible via l'objet global <code>document</code></p> <pre class="fragment"><code class="language-js" data-trim="">
			<script type="text/template">
					document.write('Hello world');
				</script>
			
</code></pre> <p class="fragment">Cet objet contient des <strong>propriétés et des méthodes</strong> pour manipuler le document</p> <pre class="fragment"><code class="language-js" data-trim="">
			<script type="text/template">
					document.title = 'Mon nouveau titre';
				</script>
	</code></pre></section></section> <section><section><h1>L'API du DOM</h1></section> <section><h2>Récupérer un élément (noeud de l'arbre)</h2> <h3 style="font-size: 2rem"><code>document.querySelector("...")</code></h3> <br> <pre><code class="language-js" data-trim="">
			>
<script type="text/template">
					document.querySelector('h1');
					document.querySelector('#my-id');
					document.querySelector('p.lead > strong');
				</script>
</code></pre> <p class="text-gray-600">Renvoie le premier élément correspondant au sélecteur CSS. <br>Retourne <code>null</code> si
			aucun élément n'est trouvé.</p></section> <section data-auto-animate=""><h2 data-id="text"><span>Lire le contenu</span></h2> <h3>Code HTML</h3> <pre><code class="language-html" data-trim="">
		<script type="text/template">
					<h1>
						Hello <em>world</em>y
					</h1>;
				</script>
		</code></pre> <h3>Code JavaScript</h3> <pre data-id="pre-code">			<code class="language-js" data-trim="">
				<script type="text/template">
					// 1. Récupérer l'élément h1 dans la variable element
					const element = document.querySelector('h1');

					// 2. Lire les informations
					const titre = element.textContent; // "Hello world"
					const titreHTML = element.innerHTML; // "Hello <em>world</em>"
				</script>
			</code>
		</pre></section> <section data-auto-animate=""><h2 data-id="text">Modifier le contenu</h2> <h3>Code HTML</h3> <pre><code class="language-html" data-trim="">
		<script type="text/template">
					<h1>
						Hello <em>world</em>y
					</h1>;
				</script>
		</code></pre> <h3>Code JavaScript</h3> <pre data-id="pre-code">			<code class="language-js" data-trim="">
				<script type="text/template">
					// Méthode préférée : remplacer le contenu texte
					element.textContent = 'Hello Jonhy';

					// Remplace le HTML (à utiliser avec précaution)
					element.innerHTML = 'Hello <em>you!</em>';
				</script>
			</code>
		</pre></section> <section><h2 data-id="text">Lire et modifier les classes CSS</h2> <h3>Code HTML</h3> <pre><code class="language-html" data-trim="">
				<script type="text/template">
					<h1 class="text-4xl text-pink-500">Titre</h1>;
				</script>
					</code></pre> <h3>Code JavaScript</h3> <pre><code class="language-js" data-trim="">
						<script type="text/template">
					const classes = element.classList;
					// ["text-4xl", "text-pink-500"] (liste des classes)

					const isPink = classes.contains('text-pink-500'); // true
				</script>
						</code></pre> <pre class="fragment"><code class="language-js" data-trim="">
		<script type="text/template">
					element.classList.add('font-bold'); // Ajoute la classe
					element.classList.remove('text-4xl'); // Supprime la classe
					element.classList.toggle('text-pink-500');
				</script>
	</code></pre></section> <section data-auto-animate=""><h2 data-id="text">Lire et modifier le style CSS</h2> <h3>Code JavaScript</h3> <pre data-id="pre-code"><code class="language-js" data-trim="">
	const color = element.style.color;

	element.style.fontSize = '2rem';
		</code></pre></section> <section data-auto-animate=""><h2 data-id="text">Lire et modifier des attributs</h2> <h3>Code JavaScript</h3> <pre data-id="pre-code"><code class="language-js" data-trim="">
	/* Lire et modifier les attributs : méthode générique */
	const placeholder = element.getAttribute('placeholder'); 
	element.setAttribute('src', 'image.jpg');

	/* Lire et modifier les attributs : accesseur direct
	 (dans certains cas seulement) */
	const valeur = input.value;
	a.href = 'https://google.com';
	</code></pre></section> <section><h2>Ajouter des nouveaux noeuds dans le DOM</h2> <h3>1. Créer un noeud</h3> <pre data-id="pre-code"><code class="language-js" data-trim="">
			<script type="text/template">
					const myImg = document.createElement('img');
					myImg.src = 'https://picsum.photos/200/300';
					myImg.alt = 'Random image';
				</script>
		</code></pre> <div class="fragment"><h3>2. Insérer un noeud</h3> <pre data-id="pre-code"><code class="language-js" data-trim="">
			<script type="text/template">
						// En fin de page
						document.body.appendChild(myImg);

						// A la fin d'un élément
						const p = document.querySelector('p');
						p.appendChild(myLink);
					</script>
	</code></pre></div> <p class="fragment"><strong class="text-pink-500">Attention !</strong> Un noeud doit être inséré pour être visible
			sur la page. Sinon, il n'existe que dans la mémoire de l'ordinateur.</p></section> <section><h2>Supprimer, cloner, remplacer un élément</h2> <pre><code class="language-js" data-trim="">
			<script type="text/template">
					/* Supprimer un noeud */
					element.remove();

					/* Cloner un noeud */
					const newHeading = document.querySelector('h1').cloneNode();

					/* Remplacer un noeud */
					newHeading.textContent = 'Hello world';
					document.querySelector('h1').replaceWith(newHeading);
				</script>
	</code></pre></section> <section><h2>Se déplacer dans le DOM</h2> <p>Le DOM est un arbre, on peut se déplacer d'un noeud à l'autre avec les propriétés suivantes :</p> <pre><code class="language-js" data-trim="">
		<script type="text/template">
					elem.previousElementSibling; // Le noeud précédent
					elem.nextElementSibling; // Le noeud suivant
					elem.parentElement; // Le noeud parent
					elem.firstChild; // Le premier noeud enfant
					elem.lastChild; // Le dernier noeud enfant
					elem.children; // Tous les noeuds enfants
				</script>
	</code></pre></section> <section><h2>Récupérer une liste d'élément</h2> <h3 style="font-size: 2rem"><code>document.querySelectorAll("...")</code></h3> <br> <pre><code class="language-js" data-trim="">
			>
<script type="text/template">
					const imgList = document.querySelectorAll('img');
					const firstImg = imgList[0];
				</script>
</code></pre> <p class="text-gray-600">Renvoie une collection (<code>NodeList</code>) de tous les éléments correspondant au sélecteur
			CSS.</p> <pre class="fragment"><code class="language-js" data-trim="">
			<script type="text/template">
					// Parcourir la liste : méthode fonctionelle
					imgList.forEach((img) => {
						img.classList.add('border-2');
					});

					// Parcourir la liste : méthode itérative
					for (const img of imgList) {
						img.classList.add('border-2');
					}
				</script>
	</code></pre></section> <section><h2><code>NodeList</code> : pas tout à fait un tableau</h2> <p>L'objet retourné par <code>querySelectorAll</code> n'est <strong>pas un tableau JavaScript classique</strong>.</p> <p>Pour utiliser les méthodes de tableau (<code>filter</code>, <code>find</code> etc.), il faut
			d'abord le <strong>convertir en tableau</strong> :</p> <pre><code class="language-js" data-trim="">
			<script type="text/template">
					const imgNodeList = document.querySelectorAll('img');
					const imgArray = Array.from(imgNodeList);
				</script>
	</code></pre></section></section> <section><h1>À vous de jouer !</h1> <h2>johangirod.com/cours</h2></section><!----></div></div></div><!----> <h2>Exercices / TP</h2> <h3>Mise en place</h3> <p>Ce TP est disponible sur gitlab. Vous pouvez le cloner avec la commande suivante :</p> <!----><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#6F42C1">git</span><span style="color:#032F62"> clone</span><span style="color:#032F62"> https://sources.univ-jfc.fr/techno-web-2/tp-2.git</span></span></code></pre><!----> <p>Utilisez les identifiants de votre compte universitaire pour vous connecter.</p> <div class="bg-blue-100 border-l-4 border-blue-500 px-4 py-2"><p class="font-bold text-blue-700"><!----><div slot="title">Utilisation de Gitlab pour sauvegarder votre travail (facultatif)</div><!----></p> <!----><p>Pour sauvegarder votre travail sur votre compte Gitlab, vous devez d’abord créer une bifurcation (fork) du repo.</p> <p><a href="https://sources.univ-jfc.fr/techno-web-2/tp-2/-/forks/new" rel="nofollow">Cliquez ici pour créer une bifurcation</a>.</p> <p>Une fois le repo créée, vous pourrez le cloner en utilisant l’URL fournie par Gitlab (bouton bleu « Code »).</p><!----></div><!----> <p>Ouvrez le dossier <code>tp-2</code> dans votre éditeur de code (VSCode par exemple).</p> <p>Ce projet contient un fichier <code>index.html</code>.</p> <p>Ouvrez le fichier <code>index.html</code> dans votre navigateur (double-cliquez sur le fichier) pour voir le résultat de votre travail.</p> <h3>Exercice 1 : modifier un élément avec la console</h3> <p>Pour commencer, nous allons nous familiariser avec la modification du DOM en utilisant la console du navigateur.</p> <ul><li><p>Faire un clique droit sur la page et sélectionner « Inspecter » dans le menu contextuel. Cela ouvre l’inspecteur du navigateur et affiche le code HTML correspondant.</p></li> <li><p>Cliquez sur l’onglet console et tapez la commande suivante :</p> <!----><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#24292E">$0;</span></span></code></pre><!----> <p>Que contient la variable <code>$0</code> ? Cliquez sur un autre élément dans l’inspecteur et de taper la commande <code>$0</code> à nouveau. Que remarquez-vous ?</p> <!--[--><div class="-ml-5 border-l-2 border-dotted border-pink-500 pl-4"><span class="mr-2 inline-block rounded-full bg-pink-500 px-2 py-1 text-sm font-semibold text-white">Corrigé</span> <button class="inline-block text-sm text-gray-500 hover:text-gray-700" aria-label="Afficher la solution" aria-expanded="false" aria-controls="jojwya4p858"><!--[!-->Afficher<!--]--></button> <!--[!--><!--]--></div><!--]--><!----></li></ul> <ol><li><p>Faire en sorte que <code>$0</code> pointe vers le noeud DOM <code>&lt;p></code> qui contient le texte « Bonjour tout le monde ! ». Vous pouvez vous aider du bouton « selection » en haut à gauche de l’inspecteur (sous forme de pointeur de souris). Il vous permet de selectionner un élement directement depuis la page web.</p></li> <li><p>Dans la console, tapez la commande suivante pour changer le texte de l’élément sélectionné :</p> <!----><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#24292E">$0.textContent </span><span style="color:#D73A49">=</span><span style="color:#032F62"> 'Bonjour les amis !'</span><span style="color:#24292E">;</span></span></code></pre><!----></li> <li><p>Changez la couleur du texte en rouge en utilisant la propriété <code>style</code> de l’élément (comme vu dans le cours).</p></li> <li><p>Supprimer le noeud de la page en utilisant la méthode <code>remove()</code>.</p></li></ol> <h3>Exercice 2 : modifier un élément avec du code JavaScript</h3> <p>Nous allons réaliser une diapositive d’images qui changent toutes les 2 secondes.</p> <ol><li><p>Pour commencer, créer un fichier <code>script.js</code>, et faire en sorte qu’il soit exécuté au chargement de la page.
Pour cela, il faudra ajouter un lien grâce à la balise <code>&lt;script></code> dans le <code>&lt;head></code> du fichier <code>index.html</code>.</p> <!----><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#24292E">&#x3C;</span><span style="color:#22863A">script</span><span style="color:#6F42C1"> defer</span><span style="color:#6F42C1"> src</span><span style="color:#24292E">=</span><span style="color:#032F62">"./script.js"</span><span style="color:#24292E">>&#x3C;/</span><span style="color:#22863A">script</span><span style="color:#24292E">></span></span></code></pre><!----> <div class="bg-blue-100 border-l-4 border-blue-500 px-4 py-2"><p class="font-bold text-blue-700"><!----><div slot="title">L'attribut `defer`</div><!----></p> <!----><p><code>defer</code> est un attribut booléen qui indique au navigateur de différer l’exécution du script après le chargement de la page. Cela permet de garantir</p> <ul><li>que le script ne bloque pas le rendu de la page</li> <li>que les éléments du DOM sont bien chargés avant l’exécution du script</li></ul> <p>Sans cet attribut, le script est exécuté au moment où il est rencontré dans le fichier HTML, ce qui peut poser des problèmes si le script est placé dans le <code>&lt;head></code>.</p> <p><strong>Pourquoi ?</strong></p> <!--[--><div class="-ml-5 border-l-2 border-dotted border-pink-500 pl-4"><span class="mr-2 inline-block rounded-full bg-pink-500 px-2 py-1 text-sm font-semibold text-white">Corrigé</span> <button class="inline-block text-sm text-gray-500 hover:text-gray-700" aria-label="Afficher la solution" aria-expanded="false" aria-controls="wwznz5c99me"><!--[!-->Afficher<!--]--></button> <!--[!--><!--]--></div><!--]--><!----> <br><!----></div><!----></li> <li><p>Dans le fichier <code>script.js</code>, récuperez le l’élément DOM existant de l’image dans une variable <code>imageNode</code>. Le noeud HTML est une image <code>img</code> avec pour id <code>diapo</code>.</p></li> <li><p>Créez une fonction <code>changeImage()</code> qui change l’attribut <code>src</code> de l’image pour pointer vers image aléatoire.</p> <p>Dans la fonction, générez un id aléatoire entre 1 et 500 et utilisez cet id pour construire l’url de l’image. Par exemple, si l’id aléatoire est 3, l’url vers la nouvelle image sera <code>https://picsum.photos/id/3/400/400</code>.</p> <p>Changez l’attribut <code>src</code> de l’image pour pointer vers cette nouvelle url.</p></li> <li><p>Appelez la fonction <code>changeImage()</code> toutes les 2 secondes en utilisant la fonction <a href="https://developer.mozilla.org/fr/docs/Web/API/WindowOrWorkerGlobalScope/setInterval" rel="nofollow"><code>setInterval</code></a>.</p> <!----><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#6F42C1">setInterval</span><span style="color:#24292E">(changeImage, </span><span style="color:#005CC5">2000</span><span style="color:#24292E">);</span></span></code></pre><!----></li></ol> <!--[--><div class="-ml-5 border-l-2 border-dotted border-pink-500 pl-4"><span class="mr-2 inline-block rounded-full bg-pink-500 px-2 py-1 text-sm font-semibold text-white">Corrigé</span> <button class="inline-block text-sm text-gray-500 hover:text-gray-700" aria-label="Afficher la solution" aria-expanded="false" aria-controls="540emn70m3d"><!--[!-->Afficher<!--]--></button> <!--[!--><!--]--></div><!--]--><!----> <h3>Exercice 3 : Modifier le style d’éléments avec du code JavaScript</h3> <p>Écrire un script qui cache tous les éléments avec la class <code>hidden</code> par un rectangle noir (on pourra utiliser l’attribut <code>style</code> pour changer la couleur de fond).</p> <!--[--><div class="-ml-5 border-l-2 border-dotted border-pink-500 pl-4"><span class="mr-2 inline-block rounded-full bg-pink-500 px-2 py-1 text-sm font-semibold text-white">Corrigé</span> <button class="inline-block text-sm text-gray-500 hover:text-gray-700" aria-label="Afficher la solution" aria-expanded="false" aria-controls="4uweuaxzs0d"><!--[!-->Afficher<!--]--></button> <!--[!--><!--]--></div><!--]--><!----> <h3>Exercice 4 : Un memory en JavaScript</h3> <p>Nous allons développer un petit jeu de mémoire.</p> <p>Le but est de faire apparaitre 5 cartes contenant des emojis aléatoires pendant 10 secondes. Ensuite, les emojis disparaissent et on pose la question à l’utilisateur : « Sous quelle carte se trouve l’emoji X ? ».</p> <h4>1. Selections des emojis</h4> <p>Créez une fonction <code>getRandomEmojis()</code> qui retourne un tableau de 5 emojis aléatoires. Pour cela vous pourrez utiliser le tableau de base suivant :</p> <!----><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#6A737D">// prettier-ignore</span></span>
<span class="line"><span style="color:#D73A49">const</span><span style="color:#005CC5"> emojis</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> [ </span><span style="color:#032F62">'⛔️'</span><span style="color:#24292E">, </span><span style="color:#032F62">'❇️'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🏰'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🐺'</span><span style="color:#24292E">, </span><span style="color:#032F62">'⚜'</span><span style="color:#24292E">, </span><span style="color:#032F62">'😅'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🚳'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🕞'</span><span style="color:#24292E">, </span><span style="color:#032F62">'❣'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🏬'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🛎'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🌕'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🌃'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🏡'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🎑'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🍯'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🐍'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🔕'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🐿'</span><span style="color:#24292E">, </span><span style="color:#032F62">'💮'</span><span style="color:#24292E">, </span><span style="color:#032F62">'😹'</span><span style="color:#24292E">, </span><span style="color:#032F62">'↕️'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🌵'</span><span style="color:#24292E">, </span><span style="color:#032F62">'♒️'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🚽'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🕋'</span><span style="color:#24292E">, </span><span style="color:#032F62">'📔'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🛂'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🎒'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🐼'</span><span style="color:#24292E">, </span><span style="color:#032F62">'♏️'</span><span style="color:#24292E">, </span><span style="color:#032F62">'⏸'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🅰️'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🌈'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🌂'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🚣'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🎇'</span><span style="color:#24292E">, </span><span style="color:#032F62">'❄️'</span><span style="color:#24292E">, </span><span style="color:#032F62">'👙'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🌹'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🍸'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🛳'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🎟'</span><span style="color:#24292E">, </span><span style="color:#032F62">'😱'</span><span style="color:#24292E">,  </span><span style="color:#032F62">'👳'</span><span style="color:#24292E">, </span><span style="color:#032F62">'😑'</span><span style="color:#24292E">, </span><span style="color:#032F62">'⌚️'</span><span style="color:#24292E">, </span><span style="color:#032F62">'💛'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🆚'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🔼'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🈯️'</span><span style="color:#24292E">, </span><span style="color:#032F62">'☀️'</span><span style="color:#24292E">, </span><span style="color:#032F62">'😳'</span><span style="color:#24292E">, </span><span style="color:#032F62">'♊️'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🌖'</span><span style="color:#24292E">, </span><span style="color:#032F62">'♋️'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🚀'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🚱'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🚊'</span><span style="color:#24292E">, </span><span style="color:#032F62">'📿'</span><span style="color:#24292E">, </span><span style="color:#032F62">'⏫'</span><span style="color:#24292E">, </span><span style="color:#032F62">'9️⃣'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🗾'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🏜'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🍦'</span><span style="color:#24292E">, </span><span style="color:#032F62">'✋'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🍀'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🗿'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🙎'</span><span style="color:#24292E">, </span><span style="color:#032F62">'✖️'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🆕'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🎮'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🔒'</span><span style="color:#24292E">, </span><span style="color:#032F62">'💸'</span><span style="color:#24292E">, </span><span style="color:#032F62">'👲'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🏢'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🔑'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🐶'</span><span style="color:#24292E">, </span><span style="color:#032F62">'👪'</span><span style="color:#24292E">, </span><span style="color:#032F62">'😻'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🌼'</span><span style="color:#24292E">, </span><span style="color:#032F62">'👠'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🧀'</span><span style="color:#24292E">, </span><span style="color:#032F62">'👎'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🙌'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🐻'</span><span style="color:#24292E">,  </span><span style="color:#032F62">'👯'</span><span style="color:#24292E">,  </span><span style="color:#032F62">'😺'</span><span style="color:#24292E">, </span><span style="color:#032F62">'😈'</span><span style="color:#24292E">, </span><span style="color:#032F62">'💴'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🎾'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🚙'</span><span style="color:#24292E">, </span><span style="color:#032F62">'❤️'</span><span style="color:#24292E">, </span><span style="color:#032F62">'♑️'</span><span style="color:#24292E">, </span><span style="color:#032F62">'🌲'</span><span style="color:#24292E">];</span></span></code></pre><!----> <p>Cette fonction peut être implémentée de la manière suivante :</p> <ul><li>Créer un tableau vide <code>randomEmojis</code></li> <li>Tant que la longueur de <code>randomEmojis</code> est inférieure à 5 : <ul><li>Générer un index aléatoire entre 0 et la longueur du tableau <code>emojis</code></li> <li>Récupérer l’emoji correspondant à cet index</li> <li>Si l’emoji n’est pas déjà dans <code>randomEmojis</code>, l’ajouter</li></ul></li> <li>Une fois que <code>randomEmojis</code> contient 5 emojis, retourner le tableau</li></ul> <p>Testez cette fonction en l’appelant avec <code>console.log(getRandomEmojis())</code>, et vérifiez que 5 emojis différents sont affichés dans la console du navigateur.</p> <!--[--><div class="-ml-5 border-l-2 border-dotted border-pink-500 pl-4"><span class="mr-2 inline-block rounded-full bg-pink-500 px-2 py-1 text-sm font-semibold text-white">Corrigé</span> <button class="inline-block text-sm text-gray-500 hover:text-gray-700" aria-label="Afficher la solution" aria-expanded="false" aria-controls="banb2q3t9rb"><!--[!-->Afficher<!--]--></button> <!--[!--><!--]--></div><!--]--><!----> <h4>2. Affichage des emojis</h4> <p>Creer une fonction <code>displayCards(emojis)</code> qui prend en paramètre un tableau d’emojis et qui les affiche dans le navigateur, en les ajoutant à la liste ordonnée (<code>ol</code>) avec l’id <code>emoji-game</code>.</p> <ul><li>Selectionnez cet élément dans une variable <code>emojisContainer</code> grâce à la fonction <code>document.querySelector</code>.</li> <li>Réinitialisez le contenu de cet élément avec la propriété <code>innerHTML</code> à une chaîne vide.</li> <li>Pour chaque emoji du tableau passé en argument <ul><li>créer un élément <code>li</code> avec <code>document.createElement</code></li> <li>modifier son contenu avec la propriété <code>textContent</code></li> <li>ajouter cet élément à <code>emojisContainer</code> avec la méthode <code>appendChild</code></li></ul></li></ul> <p>Testez cette fonction en appelant <code>displayCards(getRandomEmojis())</code>. Vous devriez voir les emojis s’afficher dans le navigateur.</p> <!--[--><div class="-ml-5 border-l-2 border-dotted border-pink-500 pl-4"><span class="mr-2 inline-block rounded-full bg-pink-500 px-2 py-1 text-sm font-semibold text-white">Corrigé</span> <button class="inline-block text-sm text-gray-500 hover:text-gray-700" aria-label="Afficher la solution" aria-expanded="false" aria-controls="8fpnswe4z4k"><!--[!-->Afficher<!--]--></button> <!--[!--><!--]--></div><!--]--><!----> <h4>3. Cacher les emojis</h4> <p>Créer une fonction <code>hideEmojis</code> qui cache le contenu en modifiant la couleurd de chacune des cartes à <code>transparent</code>.</p> <p>Pour sélectionner les cartes, on pourra utiliser la méthode <code>querySelectorAll</code> avec le sélecteur CSS approprié.</p> <p>Testez cette fonction en appelant <code>hideEmojis</code> après avoir affiché les emojis.</p> <!--[--><div class="-ml-5 border-l-2 border-dotted border-pink-500 pl-4"><span class="mr-2 inline-block rounded-full bg-pink-500 px-2 py-1 text-sm font-semibold text-white">Corrigé</span> <button class="inline-block text-sm text-gray-500 hover:text-gray-700" aria-label="Afficher la solution" aria-expanded="false" aria-controls="kf4mycyxoej"><!--[!-->Afficher<!--]--></button> <!--[!--><!--]--></div><!--]--><!----> <h4>4. Poser une question à l’utilisateur</h4> <p>Créer une fonction <code>askQuestion</code> avec les spécifications suivantes : , et pose la question à l’utilisateur : « Quelle est le numéro de la carte avec l’emoji <x>? » (avec <x>l’emoji choisie).</x></x></p> <ul><li>Cette fonction prend en paramètre le tableau des emojis affichés.</li> <li>Un emoji est choisi aléatoirement dans ce tableau.</li> <li>On pose à l’utilisateur la question « Quelle est le numéro de la carte avec l’emoji <x>? ». (avec <x>l’emoji choisie). On pourra utiliser la fonction <code>prompt</code> pour cela.</x></x></li> <li>Si l’utilisateur répond correctement, la fonction affiche un message de félicitation : <ul><li>Ajoutez une classe <code>success</code> à la liste ordonnée contenant les emojis (cela lancera une animation CSS).</li> <li>Ajouter un message de félicitation dans la <code>div</code> avec l’id <code>emoji-game-message</code> (par exemple : « Bravo 🎉 ! »).</li></ul></li> <li>Si l’utilisateur répond incorrectement, alors réafficher tous les emojis et afficher un message d’échec dans la <code>div</code> avec l’id <code>emoji-game-message</code> (par exemple : « Perdu 😔 »).</li></ul> <p>Testez que la fonction <code>askQuestion</code> fonctionne en l’appelant avec un tableau d’emojis (vous pouvez afficher la solution dans le texte de la question pour tester le cas où l’utilisateur répond correctement).</p> <!--[--><div class="-ml-5 border-l-2 border-dotted border-pink-500 pl-4"><span class="mr-2 inline-block rounded-full bg-pink-500 px-2 py-1 text-sm font-semibold text-white">Corrigé</span> <button class="inline-block text-sm text-gray-500 hover:text-gray-700" aria-label="Afficher la solution" aria-expanded="false" aria-controls="m0pj61tjwjq"><!--[!-->Afficher<!--]--></button> <!--[!--><!--]--></div><!--]--><!----> <h4>5. Assemblage du jeu</h4> <ol><li><p>Créer une fonction <code>startGame</code> qui appelle successivement les fonctions <code>getRandomEmojis</code> et <code>displayEmojis</code>.</p></li> <li><p>Utilisez la fonction <code>setTimeout</code> pour appeler la fonction <code>hideEmojis</code> après 5 secondes.</p> <!----><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#6F42C1">setTimeout</span><span style="color:#24292E">(hideEmojis, </span><span style="color:#005CC5">5000</span><span style="color:#24292E">);</span></span></code></pre><!----></li> <li><p>Utilisez la fonction <code>setTimeout</code> pour appeler la fonction <code>askQuestion</code> après 5 secondes et 100 millisecondes.</p></li> <li><p>Appelez la fonction <code>startGame</code> pour lancer le jeu.</p></li></ol> <!--[--><div class="-ml-5 border-l-2 border-dotted border-pink-500 pl-4"><span class="mr-2 inline-block rounded-full bg-pink-500 px-2 py-1 text-sm font-semibold text-white">Corrigé</span> <button class="inline-block text-sm text-gray-500 hover:text-gray-700" aria-label="Afficher la solution" aria-expanded="false" aria-controls="07op8sxh6r1i"><!--[!-->Afficher<!--]--></button> <!--[!--><!--]--></div><!--]--><!----> <h4>6. Pour aller plus loin</h4> <ol><li><p>Faire en sorte que le jeu boucle tant que l’utilisateur ne trouve pas la bonne réponse, en affichant les emojis pendant 5 secondes puis en posant une nouvelle question.</p></li> <li><p>Faire en sorte que le jeu augmente en difficulté à chaque fois que l’utilisateur trouve la bonne réponse, en ajoutant un emoji supplémentaire à chaque tour. Afficher un compteur de niveau. Si l’utilisateur se trompe, le niveau est réinitialisé à 1.</p></li></ol><!----><!--]--><!----><!----><!--]--><!----></main></div><!----><!--]--><!----></div><!----><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_pqo0dy = {
						base: new URL("../../..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					Promise.all([
						import("../../../_app/immutable/entry/start.Bnp5303b.js"),
						import("../../../_app/immutable/entry/app.gFT0rYy9.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 2, 3, 8],
							data: [{"type":"data","data":null,"uses":{}},null,null,null],
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
